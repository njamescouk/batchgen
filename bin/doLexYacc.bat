@echo off
rem this file has been generated by batchgen and may be overwritten
rem command line: batchgen -orb doLexYacc.bg
rem date 2011-0-8 16:32:45

@goto main
:finalise
set DLY_DEBUG=
set DLY_HELP=
set DLY_LEX_FLAGS=
set DLY_YACC_FLAGS=
set DLY_LEX_FILE=
set DLY_GRAMMAR_FILE=
set DLY_FLEX=
set DLY_YACC=
set DLY_TERMINATE=
goto :eof
:usage
echo usage %0 [options]
echo options
echo     -d     include debugging code for lexer and parser
echo     -h     this screen
set DLY_TERMINATE=yes
goto :eof
:getopts
if "%1" == "" goto EW0
if "%1" == "-d"  set DLY_DEBUG=True 
if "%1" == "-h"  set DLY_HELP=True 
 shift  
goto getopts
:EW0
goto :eof
:initialise
set DLY_DEBUG=
set DLY_HELP=
set DLY_TERMINATE=
set DLY_LEX_FILE=batchgen.l
set DLY_GRAMMAR_FILE=batchgen.y
set DLY_FLEX="C:\Program Files (x86)\GnuWin32\bin\flex.exe"
set DLY_YACC="C:\Program Files (x86)\GnuWin32\bin\yacc.exe"
goto :eof
:main
call :initialise
call :getopts %* 
pushd I:\usr\NIK\dev\batchgen\source
if "%DLY_HELP%" == "True" call :usage
if "%DLY_TERMINATE%" == "yes" goto batch_end
if not "%DLY_DEBUG%" == "" goto LS4
    set DLY_LEX_FLAGS=
    set DLY_YACC_FLAGS= -tdv
    set YYDEBUG=
goto EI4
:LS4
    set DLY_LEX_FLAGS=-d
    set DLY_YACC_FLAGS=-ldv
    set YYDEBUG=1
:EI4
@echo on
%DLY_YACC% %DLY_YACC_FLAGS% %DLY_GRAMMAR_FILE%
%DLY_FLEX% %DLY_LEX_FLAGS% %DLY_LEX_FILE%
@echo off
sed "/extern char \*getenv();/d" y.tab.c > junk
del y.tab.c
mv junk y.tab.c
move y.output ..\doc\y.output > nul
popd
call :finalise
:batch_end
